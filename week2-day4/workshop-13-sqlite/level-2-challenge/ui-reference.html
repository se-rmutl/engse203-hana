<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Workshop 13 - Library System Reference</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #5f72bd 0%, #9921e8 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #5f72bd 0%, #9921e8 100%);
      color: white;
      padding: 40px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .header p {
      opacity: 0.9;
      font-size: 1.2em;
    }

    .alert {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 20px;
      margin: 30px;
      border-radius: 8px;
      color: #856404;
    }

    .alert h3 {
      margin-bottom: 10px;
      color: #856404;
    }

    .content {
      padding: 30px;
    }

    .section {
      margin-bottom: 30px;
      padding: 25px;
      background: #f8f9fa;
      border-radius: 8px;
      border-left: 4px solid #5f72bd;
    }

    .section h2 {
      color: #5f72bd;
      margin-bottom: 20px;
      font-size: 1.5em;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section h3 {
      color: #333;
      margin: 20px 0 10px 0;
      font-size: 1.2em;
    }

    .code-block {
      background: #1a202c;
      color: #68d391;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      margin: 15px 0;
    }

    .code-block .comment {
      color: #718096;
    }

    .code-block .keyword {
      color: #63b3ed;
    }

    .code-block .string {
      color: #f6ad55;
    }

    .model-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .model-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      border: 2px solid #e2e8f0;
      transition: all 0.3s;
    }

    .model-card:hover {
      border-color: #5f72bd;
      box-shadow: 0 4px 12px rgba(95, 114, 189, 0.2);
    }

    .model-card h4 {
      color: #5f72bd;
      margin-bottom: 15px;
      font-size: 1.1em;
    }

    .method-list {
      list-style: none;
      padding: 0;
    }

    .method-list li {
      padding: 8px 12px;
      background: #f7fafc;
      margin-bottom: 8px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      border-left: 3px solid #5f72bd;
    }

    .method-list li .method-name {
      color: #5f72bd;
      font-weight: bold;
    }

    .method-list li .method-desc {
      color: #718096;
      font-size: 12px;
      margin-top: 4px;
    }

    .schema-table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
      background: white;
      border-radius: 8px;
      overflow: hidden;
    }

    .schema-table th {
      background: #5f72bd;
      color: white;
      padding: 12px;
      text-align: left;
      font-weight: 600;
    }

    .schema-table td {
      padding: 10px 12px;
      border-bottom: 1px solid #e2e8f0;
    }

    .schema-table tr:last-child td {
      border-bottom: none;
    }

    .feature-list {
      list-style: none;
      padding: 0;
    }

    .feature-list li {
      padding: 12px;
      margin-bottom: 10px;
      background: white;
      border-radius: 6px;
      border-left: 4px solid #48bb78;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .feature-list li::before {
      content: '‚úì';
      background: #48bb78;
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .btn {
      display: inline-block;
      padding: 12px 24px;
      background: #5f72bd;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-weight: 600;
      transition: all 0.3s;
      margin-right: 10px;
    }

    .btn:hover {
      background: #4a5a9e;
      transform: translateY(-2px);
    }

    .example {
      background: white;
      padding: 15px;
      border-radius: 6px;
      border-left: 4px solid #ed8936;
      margin: 15px 0;
    }

    .example h4 {
      color: #ed8936;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üóÑÔ∏è Workshop 13: Library System</h1>
      <p>SQLite Database Integration (No API Server)</p>
    </div>

    <div class="alert">
      <h3>‚ö†Ô∏è ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</h3>
      <p><strong>Workshop 13 ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà API-based workshop</strong></p>
      <p>Workshop ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô SQLite database ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏ú‡πà‡∏≤‡∏ô <code>better-sqlite3</code> ‡πÑ‡∏°‡πà‡∏°‡∏µ Express server ‡∏´‡∏£‡∏∑‡∏≠ REST API endpoints</p>
      <p>‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏ï‡πâ‡∏≠‡∏á run code ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡πÉ‡∏ô Node.js</p>
    </div>

    <div class="content">
      <!-- Project Structure -->
      <div class="section">
        <h2>üìÅ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ</h2>
        <div class="code-block">
<span class="comment">workshop-13-sqlite/</span>
<span class="comment">level-2-challenge/</span>
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ schema.sql       <span class="comment"># Database structure (3 tables)</span>
‚îÇ   ‚îú‚îÄ‚îÄ seed.sql         <span class="comment"># Sample data</span>
‚îÇ   ‚îî‚îÄ‚îÄ library.db       <span class="comment"># SQLite file (auto-created)</span>
‚îÇ
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ Book.js          <span class="comment"># Book model (CRUD operations)</span>
‚îÇ   ‚îú‚îÄ‚îÄ Member.js        <span class="comment"># Member model (with JOIN)</span>
‚îÇ   ‚îî‚îÄ‚îÄ Borrowing.js     <span class="comment"># Borrowing model (complex logic)</span>
‚îÇ
‚îú‚îÄ‚îÄ db.js                <span class="comment"># Database connection</span>
‚îî‚îÄ‚îÄ index.js             <span class="comment"># Main program (CLI)</span>
        </div>
      </div>

      <!-- Database Schema -->
      <div class="section">
        <h2>üóÉÔ∏è Database Schema</h2>
        
        <h3>1. Books Table</h3>
        <table class="schema-table">
          <thead>
            <tr>
              <th>Column</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>id</td>
              <td>INTEGER PRIMARY KEY</td>
              <td>Auto-increment ID</td>
            </tr>
            <tr>
              <td>title</td>
              <td>TEXT NOT NULL</td>
              <td>Book title</td>
            </tr>
            <tr>
              <td>author</td>
              <td>TEXT NOT NULL</td>
              <td>Author name</td>
            </tr>
            <tr>
              <td>available</td>
              <td>INTEGER DEFAULT 1</td>
              <td>1 = available, 0 = borrowed</td>
            </tr>
          </tbody>
        </table>

        <h3>2. Members Table</h3>
        <table class="schema-table">
          <thead>
            <tr>
              <th>Column</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>id</td>
              <td>INTEGER PRIMARY KEY</td>
              <td>Auto-increment ID</td>
            </tr>
            <tr>
              <td>name</td>
              <td>TEXT NOT NULL</td>
              <td>Member name</td>
            </tr>
            <tr>
              <td>email</td>
              <td>TEXT NOT NULL UNIQUE</td>
              <td>Email address</td>
            </tr>
            <tr>
              <td>phone</td>
              <td>TEXT</td>
              <td>Phone number</td>
            </tr>
          </tbody>
        </table>

        <h3>3. Borrowings Table</h3>
        <table class="schema-table">
          <thead>
            <tr>
              <th>Column</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>id</td>
              <td>INTEGER PRIMARY KEY</td>
              <td>Auto-increment ID</td>
            </tr>
            <tr>
              <td>book_id</td>
              <td>INTEGER</td>
              <td>Foreign key ‚Üí books.id</td>
            </tr>
            <tr>
              <td>member_id</td>
              <td>INTEGER</td>
              <td>Foreign key ‚Üí members.id</td>
            </tr>
            <tr>
              <td>borrow_date</td>
              <td>TEXT DEFAULT CURRENT_TIMESTAMP</td>
              <td>Borrow date/time</td>
            </tr>
            <tr>
              <td>return_date</td>
              <td>TEXT</td>
              <td>Return date/time (NULL if not returned)</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Models -->
      <div class="section">
        <h2>üìö Models & Methods</h2>
        <div class="model-grid">
          <!-- Book Model -->
          <div class="model-card">
            <h4>Book.js</h4>
            <ul class="method-list">
              <li>
                <div class="method-name">getAll()</div>
                <div class="method-desc">Get all books</div>
              </li>
              <li>
                <div class="method-name">getAvailable()</div>
                <div class="method-desc">üî® Challenge: Get available books</div>
              </li>
              <li>
                <div class="method-name">search(keyword)</div>
                <div class="method-desc">üî® Challenge: Search in title/author</div>
              </li>
              <li>
                <div class="method-name">add(title, author)</div>
                <div class="method-desc">üî® Challenge: Add new book</div>
              </li>
              <li>
                <div class="method-name">getById(id)</div>
                <div class="method-desc">Get book by ID</div>
              </li>
            </ul>
          </div>

          <!-- Member Model -->
          <div class="model-card">
            <h4>Member.js</h4>
            <ul class="method-list">
              <li>
                <div class="method-name">getAll()</div>
                <div class="method-desc">Get all members</div>
              </li>
              <li>
                <div class="method-name">getBorrowedBooks(memberId)</div>
                <div class="method-desc">‚úÖ Provided: Get borrowed books with JOIN</div>
              </li>
              <li>
                <div class="method-name">add(name, email, phone)</div>
                <div class="method-desc">üî® Challenge: Add new member</div>
              </li>
              <li>
                <div class="method-name">getById(id)</div>
                <div class="method-desc">Get member by ID</div>
              </li>
            </ul>
          </div>

          <!-- Borrowing Model -->
          <div class="model-card">
            <h4>Borrowing.js</h4>
            <ul class="method-list">
              <li>
                <div class="method-name">getAll()</div>
                <div class="method-desc">Get all borrowings with JOIN</div>
              </li>
              <li>
                <div class="method-name">borrow(bookId, memberId)</div>
                <div class="method-desc">üî® Challenge: Borrow a book (2 tables update)</div>
              </li>
              <li>
                <div class="method-name">returnBook(borrowingId)</div>
                <div class="method-desc">üî® Challenge: Return a book (2 tables update)</div>
              </li>
              <li>
                <div class="method-name">getUnreturned()</div>
                <div class="method-desc">üî® Challenge: Get unreturned books</div>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- How to Run -->
      <div class="section">
        <h2>üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô</h2>
        
        <h3>1. Setup Database</h3>
        <div class="code-block">
<span class="comment"># ‡∏™‡∏£‡πâ‡∏≤‡∏á database ‡πÅ‡∏•‡∏∞ tables</span>
node db.js

<span class="comment"># ‡∏´‡∏£‡∏∑‡∏≠ reset database (‡∏•‡∏ö‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà)</span>
node db.js --reset
        </div>

        <h3>2. Run Main Program</h3>
        <div class="code-block">
<span class="comment"># ‡∏£‡∏±‡∏ô CLI program</span>
node index.js

<span class="comment"># ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å database</span>
        </div>

        <h3>3. Test Individual Methods</h3>
        <div class="code-block">
<span class="comment">// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå test.js</span>
<span class="keyword">const</span> Book = <span class="keyword">require</span>(<span class="string">'./models/Book'</span>);
<span class="keyword">const</span> Member = <span class="keyword">require</span>(<span class="string">'./models/Member'</span>);
<span class="keyword">const</span> Borrowing = <span class="keyword">require</span>(<span class="string">'./models/Borrowing'</span>);

<span class="comment">// Test Book methods</span>
console.log(<span class="string">'All books:'</span>, Book.getAll());
console.log(<span class="string">'Available books:'</span>, Book.getAvailable());
console.log(<span class="string">'Search "Harry":'</span>, Book.search(<span class="string">'Harry'</span>));

<span class="comment">// Test Member methods</span>
<span class="keyword">const</span> borrowed = Member.getBorrowedBooks(<span class="string">1</span>);
console.log(<span class="string">'Member #1 borrowed:'</span>, borrowed);

<span class="comment">// Test Borrowing methods</span>
<span class="keyword">const</span> borrowId = Borrowing.borrow(<span class="string">2</span>, <span class="string">1</span>);
console.log(<span class="string">'Borrow ID:'</span>, borrowId);
        </div>
      </div>

      <!-- Challenge Features -->
      <div class="section">
        <h2>üéØ Challenge Features</h2>
        <ul class="feature-list">
          <li>Book.getAvailable() - Filter available books (WHERE clause)</li>
          <li>Book.search() - Search with LIKE operator</li>
          <li>Book.add() - INSERT new book</li>
          <li>Member.add() - INSERT new member</li>
          <li>Borrowing.borrow() - Complex transaction (2 tables)</li>
          <li>Borrowing.returnBook() - Complex transaction (2 tables)</li>
          <li>Borrowing.getUnreturned() - Filter with IS NULL</li>
        </ul>
      </div>

      <!-- Examples -->
      <div class="section">
        <h2>üí° ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>
        
        <div class="example">
          <h4>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 1: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</h4>
          <div class="code-block">
<span class="keyword">const</span> Book = <span class="keyword">require</span>(<span class="string">'./models/Book'</span>);

<span class="comment">// ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "Harry"</span>
<span class="keyword">const</span> results = Book.search(<span class="string">'Harry'</span>);
console.log(results);
<span class="comment">// [{ id: 1, title: 'Harry Potter', author: 'J.K. Rowling', available: 0 }]</span>
          </div>
        </div>

        <div class="example">
          <h4>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 2: ‡∏¢‡∏∑‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</h4>
          <div class="code-block">
<span class="keyword">const</span> Borrowing = <span class="keyword">require</span>(<span class="string">'./models/Borrowing'</span>);

<span class="comment">// ‡∏¢‡∏∑‡∏°‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏•‡πà‡∏°‡∏ó‡∏µ‡πà 2 ‡πÇ‡∏î‡∏¢‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà 1</span>
<span class="keyword">const</span> borrowId = Borrowing.borrow(<span class="string">2</span>, <span class="string">1</span>);
console.log(<span class="string">'Borrowed! ID:'</span>, borrowId);

<span class="comment">// ‡∏Ñ‡∏∑‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</span>
<span class="keyword">const</span> returned = Borrowing.returnBook(borrowId);
console.log(<span class="string">'Returned:'</span>, returned);
          </div>
        </div>

        <div class="example">
          <h4>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 3: ‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏¢‡∏∑‡∏° (JOIN)</h4>
          <div class="code-block">
<span class="keyword">const</span> Member = <span class="keyword">require</span>(<span class="string">'./models/Member'</span>);

<span class="comment">// ‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏¢‡∏∑‡∏°‡∏≠‡∏¢‡∏π‡πà</span>
<span class="keyword">const</span> borrowed = Member.getBorrowedBooks(<span class="string">1</span>);
console.log(borrowed);
<span class="comment">// [</span>
<span class="comment">//   {</span>
<span class="comment">//     title: 'Harry Potter',</span>
<span class="comment">//     author: 'J.K. Rowling',</span>
<span class="comment">//     borrow_date: '2024-01-31 10:00:00'</span>
<span class="comment">//   }</span>
<span class="comment">// ]</span>
          </div>
        </div>
      </div>

      <!-- Next Steps -->
      <div class="section">
        <h2>üìñ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</h2>
        <p style="margin-bottom: 20px;">‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏™‡∏£‡πá‡∏à Workshop 13 ‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏ó‡∏µ‡πà:</p>
        <a href="../../workshop-14-database-integration/level-1-guided/ui-tester.html" class="btn">
          Workshop 14: Todo API (SQLite + Express)
        </a>
        <a href="../../workshop-15-mongodb-fundamentals/level-1-guided/ui-tester.html" class="btn">
          Workshop 15: Todo API (MongoDB + Mongoose)
        </a>
      </div>
    </div>
  </div>
</body>
</html>
